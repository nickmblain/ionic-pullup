!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ionic/angular"),require("@angular/platform-browser"),require("hammerjs")):"function"==typeof define&&define.amd?define("ionic-pullup",["exports","@angular/core","@ionic/angular","@angular/platform-browser","hammerjs"],e):e((t=t||self)["ionic-pullup"]={},t.ng.core,t.angular,t.ng.platformBrowser,t.hammerjs)}(this,(function(t,e,o,i,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};var a,s,l=["*"],h=function(){function t(){}return t.ɵfac=function(e){return new(e||t)},t.ɵcmp=e.ɵɵdefineComponent({type:t,selectors:[["lib-ionic-pullup-tab"]],ngContentSelectors:l,decls:1,vars:0,template:function(t,o){1&t&&(e.ɵɵprojectionDef(),e.ɵɵprojection(0))},styles:["[_nghost-%COMP%]{z-index:1000;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;position:relative;width:120px;height:10px;background:var(--ion-color-primary);color:#fff;border-radius:10px 10px 0 0;margin:0 auto}"]}),t}(),p=["ionDragFooter"],u=["footer"],d=["*"];(a=t.IonPullUpFooterState||(t.IonPullUpFooterState={}))[a.Collapsed=0]="Collapsed",a[a.Expanded=1]="Expanded",a[a.Minimized=2]="Minimized",(s=t.IonPullUpFooterBehavior||(t.IonPullUpFooterBehavior={}))[s.Hide=0]="Hide",s[s.Expand=1]="Expand";var f=function(){function n(o,i,n){this.platform=o,this.renderer=i,this.hammerConfig=n,this.stateChange=new e.EventEmitter,this.toolbarTopMargin=0,this.minBottomVisible=0,this.expanded=new e.EventEmitter,this.collapsed=new e.EventEmitter,this.minimized=new e.EventEmitter,this.dragged=new e.EventEmitter,this.footerMeta={height:0,posY:0,lastPosY:0},this.currentViewMeta={bottomSpace:screen.height-window.innerHeight},this.initialState=this.initialState||t.IonPullUpFooterState.Collapsed,this.defaultBehavior=this.defaultBehavior||t.IonPullUpFooterBehavior.Expand}return n.prototype.ngOnInit=function(){var t=this;window.addEventListener("orientationchange",(function(){t.updateUI(),t.collapse()})),this.platform.resume.subscribe((function(){t.updateUI(),t.collapse()})),this.footerMeta.toolbarLowerBoundary=this.dockable?this.minBottomVisible:0},n.prototype.ngAfterContentInit=function(){this.computeDefaults(),this.state=t.IonPullUpFooterState.Collapsed,this.updateUI()},Object.defineProperty(n.prototype,"expandedHeight",{get:function(){return window.innerHeight-this.currentViewMeta.toolbarHeight-this.currentViewMeta.tabsHeight},enumerable:!0,configurable:!0}),n.prototype.computeDefaults=function(){var t=this;setTimeout((function(){t.footerMeta.toolbarDefaultHeight=t.childFooter.nativeElement.offsetHeight,t.findIonicComponentsInPage(),t.dragElements.forEach((function(e){t.hammerConfig.buildHammer(e.el).on("pan panstart panend",(function(e){t.onPan(e)}))}))}),300)},n.prototype.computeHeights=function(){this.footerMeta.height=this.expandedHeight,this.footerMeta.toolbarDefaultExpandedPosition=-this.footerMeta.height+this.footerMeta.toolbarDefaultHeight+this.minBottomVisible,this.footerMeta.toolbarUpperBoundary=this.footerMeta.height-this.footerMeta.toolbarDefaultHeight-this.minBottomVisible,this.renderer.setStyle(this.childFooter.nativeElement,"height",this.footerMeta.height+"px"),this.renderer.setStyle(this.childFooter.nativeElement,"top",window.innerHeight-this.footerMeta.toolbarDefaultHeight-this.currentViewMeta.tabsHeight-this.minBottomVisible+"px"),this.updateIonContentHeight()},n.prototype.updateUI=function(t){var e=this;void 0===t&&(t=!1),this.childFooter&&(setTimeout((function(){e.computeHeights()}),300),this.renderer.setStyle(this.childFooter.nativeElement,"transition","none"))},n.prototype.expand=function(){this.footerMeta.lastPosY=this.footerMeta.toolbarDefaultExpandedPosition,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.lastPosY),this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.expanded.emit(null)},n.prototype.collapse=function(t){var e=this;void 0===t&&(t=!1),this.childFooter&&(this.footerMeta.lastPosY=0,this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),setTimeout((function(){return e.updateIonContentHeight(e.minBottomVisible-e.footerMeta.lastPosY)}),300),t||this.collapsed.emit(null))},n.prototype.minimize=function(){this.footerMeta.lastPosY=this.footerMeta.height,this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.minimized.emit(null)},n.prototype.onTap=function(e){e.preventDefault(),this.state===t.IonPullUpFooterState.Collapsed?this.defaultBehavior===t.IonPullUpFooterBehavior.Hide?this.state=t.IonPullUpFooterState.Minimized:this.state=t.IonPullUpFooterState.Expanded:this.state===t.IonPullUpFooterState.Minimized?this.defaultBehavior===t.IonPullUpFooterBehavior.Hide?this.state=t.IonPullUpFooterState.Collapsed:this.state=t.IonPullUpFooterState.Expanded:this.state=this.initialState===t.IonPullUpFooterState.Minimized?t.IonPullUpFooterState.Minimized:t.IonPullUpFooterState.Collapsed},n.prototype.onPan=function(t){switch(this.renderer.setStyle(this.childFooter.nativeElement,"transition","none"),t.preventDefault(),t.type){case"pan":this.footerMeta.posY=t.deltaY+this.footerMeta.lastPosY,this.footerMeta.posY=this.footerMeta.posY>this.footerMeta.toolbarLowerBoundary?this.footerMeta.toolbarLowerBoundary:Math.abs(this.footerMeta.posY)>this.footerMeta.toolbarUpperBoundary?this.footerMeta.toolbarDefaultExpandedPosition:this.footerMeta.posY,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.posY),this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.posY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.posY+"px, 0)");break;case"panend":this.renderer.setStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.footerMeta.lastPosY=this.footerMeta.posY,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.lastPosY);var e=this.dragElements.first;this.dragged.emit({delta:this.footerMeta.lastPosY,toolbarAbsolutePosition:e?e.el.getBoundingClientRect():null})}},n.prototype.ngOnChanges=function(e){var o=this;if(!e.state.isFirstChange()&&e.state.currentValue!==e.state.previousValue){switch(this.state){case t.IonPullUpFooterState.Collapsed:this.collapse();break;case t.IonPullUpFooterState.Expanded:this.expand();break;case t.IonPullUpFooterState.Minimized:this.minimize()}window.setTimeout((function(){o.stateChange.emit(o.state)}))}},n.prototype.findIonicComponentsInPage=function(){if(this.footerMeta.ionContentRef=this.childFooter.nativeElement.querySelector("ion-content"),this.currentViewMeta.tabsRef=document.querySelector("ion-tab-bar"),this.currentViewMeta.tabsHeight=this.currentViewMeta.tabsRef?this.currentViewMeta.tabsRef.offsetHeight:0,this.toolbarTopMargin)this.currentViewMeta.toolbarHeight=this.toolbarTopMargin;else{var t=document.querySelector("ion-router-outlet");if(t){var e=t.querySelector("ion-header");e?(this.currentViewMeta.toolbarRef=e.querySelector("ion-toolbar"),this.currentViewMeta.toolbarHeight=this.currentViewMeta.toolbarRef.clientHeight):this.currentViewMeta.toolbarHeight=0}}},n.prototype.updateIonContentHeight=function(t){if(this.footerMeta.ionContentRef){var e=t?t+"px":this.minBottomVisible>0?this.minBottomVisible+"px":"100%";this.renderer.setStyle(this.footerMeta.ionContentRef,"max-height",e)}},n.ɵfac=function(t){return new(t||n)(e.ɵɵdirectiveInject(o.Platform),e.ɵɵdirectiveInject(e.Renderer2),e.ɵɵdirectiveInject(i.HAMMER_GESTURE_CONFIG))},n.ɵcmp=e.ɵɵdefineComponent({type:n,selectors:[["lib-ionic-pullup"]],contentQueries:function(t,o,i){var n;(1&t&&e.ɵɵcontentQuery(i,p,!1),2&t)&&(e.ɵɵqueryRefresh(n=e.ɵɵloadQuery())&&(o.dragElements=n))},viewQuery:function(t,o){var i;(1&t&&e.ɵɵstaticViewQuery(u,!0),2&t)&&(e.ɵɵqueryRefresh(i=e.ɵɵloadQuery())&&(o.childFooter=i.first))},inputs:{state:"state",initialState:"initialState",defaultBehavior:"defaultBehavior",toolbarTopMargin:"toolbarTopMargin",minBottomVisible:"minBottomVisible",dockable:"dockable"},outputs:{stateChange:"stateChange",expanded:"expanded",collapsed:"collapsed",minimized:"minimized",dragged:"dragged"},features:[e.ɵɵNgOnChangesFeature],ngContentSelectors:d,decls:3,vars:0,consts:[[1,"footer"],["footer",""]],template:function(t,o){1&t&&(e.ɵɵprojectionDef(),e.ɵɵelementStart(0,"div",0,1),e.ɵɵprojection(2),e.ɵɵelementEnd())},styles:[".footer[_ngcontent-%COMP%]{left:0;right:0;position:fixed}"],changeDetection:0}),n}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overrides={pan:{direction:n.DIRECTION_VERTICAL}},e}return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e}(i.HammerGestureConfig),m=function(){function t(){}return t.ɵmod=e.ɵɵdefineNgModule({type:t}),t.ɵinj=e.ɵɵdefineInjector({factory:function(e){return new(e||t)},providers:[{provide:i.HAMMER_GESTURE_CONFIG,useClass:c}],imports:[[]]}),t}();("undefined"==typeof ngJitMode||ngJitMode)&&e.ɵɵsetNgModuleScope(m,{declarations:[f,h],exports:[f,h]}),t.IonicPullupComponent=f,t.IonicPullupComponentTabComponent=h,t.IonicPullupModule=m,t.MyHammerConfig=c,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ionic-pullup.umd.min.js.map